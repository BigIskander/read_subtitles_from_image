# read_subtitles_from_image

[In english](README.md)

Программа для распознавания текста (субтитров), являющегося частью изображения.

Программа предназначена для распознавания текста из изображения, с целью, чтобы потом незнакомые слова можно было легко найти и посмотреть в словаре. 

Программу писал для изучения китайского языка, поэтому, по умолчанию стоят настройки для распознавания китайского языка.

С технической точки зрения программа выступает как frontend (как GUI или графическая оболочка) к программе tesseract-ocr. Эта программа вырезает из общего изображения нужный участок с текстом, обрабатывает его в зависимости от настроек и отправляет в программу tesseract-ocr для распознавания текста, затем отображает полученный результат. У самой же программы tesseract-ocr графический интерфейс отсутсвует.  

## Как пользоваться программой

Для того, чтобы распознать текст нужно: выделить нужный участок текста и нажать "Recognize selected text.". Иногда, для лучшего распознавания текста, может понадобиться переключить некоторые настройки. Ниже представлена видеодемонстрация работы программы.

Видео демонстрация:

https://github.com/user-attachments/assets/6d610ada-971e-4d68-a9fd-2eb6c52160c4

Для видео демонстрации я использовал снимок с экрана шоу [The Beauty Blogger](https://wetv.vip/en/play/qgvq32ixh4yujoc-The%20Beauty%20Blogger/o0029e5dqz9-EP19%EF%BC%9AThe%20Beauty%20Blogger), сделанный когда субтитры включены.

## Как установить и настроить

Вы можете найти уже скомпилированные бинарные (установочные) файлы с программой на странице релизов ([releases](https://github.com/BigIskander/read_subtitles_from_image/releases)).

Программа доступна для операционных системм Linux, Windows и macOS.

Для работы программы так же требуется установить [tesseract-ocr](https://tesseract-ocr.github.io/) и добавить файлы [.traineddata](https://github.com/tesseract-ocr/tessdata) (с предтренированными данными для распознавания текста).

**Примечание:** Я бы рекомендовал установить tesseract 4 (вместо tesseract 5). Так как результаты наиболее точные при использовании с tesseract 4 (по крайней мере при распознавании текста на китайском языке).

Далее в настройках программы указать папку установки tesseract и папку, в которой находятся файлы .traineddata. Или, как алтернативный вариант, добавить эти папки в переменную окружения PATH вашей операционной системы. После чего указать язык распознаваемого текста.

По умолчанию указан язык распознавания chi_all, .traineddata  файл,  к которому можно скачать из: https://github.com/gumblex/tessdata_chi (файл chi_all.traineddata)

Доступна так же [версия программы работающая в docker](https://hub.docker.com/r/bigiskander/read_subtitles_from_image). В этой версии все необходимое для работы программы уже настроено и встроено в образ [docker](https://www.docker.com/) контейнер.

## Для разработчиков

В версии, запускаемой в docker контейнере, в качестве backend используется сервер [expressjs](https://expressjs.com/). 

В версии, построенной с использованием [electronjs](https://www.electronjs.org/), в качестве backend используется собственный API интерфейс фреймворка electronjs.

Для того, чтобы настроить среду разработки, нужно установить [nodejs](https://nodejs.org/en) версии 20 или новее. 

Далее установить зависимости:
```
npm install
cd electron
npm install
cd ..
```

Для того, чтобы запустить в среде разработки (vite + expressjs):
```
npm run dev
```

Для компиляции (vite + expressjs):
```
npm run build
```

Запустить electronjs версию в среде разработки:
```
npm run electron
```

Скомпилировать electronjs версию:
```
npm run just_build
npm run electron_build
```
